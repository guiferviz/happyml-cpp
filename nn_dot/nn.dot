digraph NeuralNetwork {

	d2toptions="-tmath --margin 3pt";
	
	// Title.
	label="\\text{Neural Network}";
	lblstyle="scale=1.5,draw,fill=gray!20";
	labelloc="t";

	rankdir=LR;
	splines=line;
	nodesep=0.1;
	ranksep=1.0;
	margin=3;
	center=true;
    
	node [shape=circle, fixedsize=true, style=solid, color=blue];
	edge [color=black, constraint=true];


	subgraph {
		rank=same;
		x_0 [color=black];
	    node [color=green];
		name_0 [color=white,label="\\text{Input layer}"];
		// Set vertical order in this layer.
		name_0 -> x_0 -> x_1 -> x_2 [style=invis];
	}

	subgraph {
		rank=same;
		a_10 [color=black,label="a_{10}"];
		name_1 [color=white,label="\\text{Layer 2}"];
		a_11 [label="a_{11}"];
		a_12 [label="a_{12}"];
		a_13 [label="a_{13}"];
		// Set vertical order in this layer.
		name_1 -> a_10 -> a_11 -> a_12 -> a_13 [style=invis];
	}

	subgraph {
		rank=same;
		a_20 [color=black,label="a_{20}"];
		name_2 [color=white,label="\\text{Layer 3}"];
		a_21 [label="a_{21}"];
		a_22 [label="a_{22}"];
		a_23 [label="a_{23}"];
		// Set vertical order in this layer.
		name_2 -> a_20 -> a_21 -> a_22 -> a_23 [style=invis];
	}

	subgraph {
		rank=same;
		node [color=red];
		name_3 [color=white,label="\\text{Output layer}"];
		a_31 [label="a_{31}"];
		// Set vertical order in this layer.
		name_3 -> a_31 [style=invis];
	}

	//name_0 -> {a_11 a_12 a_13 a_14 a_15} [style=invis];
	x_0 -> {a_11 a_12 a_13};
	x_0 -> a_10 [style=invis];
	x_1 -> {a_11 a_12 a_13};
	x_1 -> a_10 [style=invis];
	x_2 -> {a_11 a_12 a_13};
	x_2 -> a_10 [style=invis];

	//name_1 -> {a_21 a_22} [style=invis];
	a_10 -> {a_21 a_22 a_23};
	a_10 -> a_20 [style=invis];
    a_11 -> {a_21 a_22 a_23};
	a_11 -> a_20 [style=invis];
	a_12 -> {a_21 a_22 a_23};
	a_12 -> a_20 [style=invis];
	a_13 -> {a_21 a_22 a_23};
	a_13 -> a_20 [style=invis];

	//name_2 -> {a_31 a_32 a_33 a_34} [style=invis];
	a_20 -> {a_31};
	a_21 -> {a_31};
	a_22 -> {a_31};
	a_23 -> {a_31};

	edge [style=invis];
	name_0 -> name_1 -> name_2 -> name_3;	

}

